{"version":3,"sources":["assets/img/noneAvatar.png","components/Users/Users.module.css","components/Users/User/User.module.css","components/Users/User/User.jsx","components/Users/Users.jsx","selectors/usersSelectors.js","components/Users/UsersContainer.jsx"],"names":["module","exports","User","props","className","styles","item","imgDiv","to","id","src","imgSrc","noneAvatar","text","name","textMin","status","isAuth","followed","Button","disabled","followingInProgress","some","variant","size","color","style","marginTop","endIcon","Icon","onClick","unfollow","follow","Users","pagesCount","Math","ceil","totalUsersCount","pageSize","usersElement","usersPage","map","u","key","photos","small","toggleIsFollowInProgress","panel","listUsers","paginationCenter","Pagination","count","defaultPage","boundaryCount","page","currentPage","onChange","event","value","onPageChanged","getUsersSelector","createSelector","state","users","filter","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","isFetching","getFollowingInProgress","compose","connect","getIsAuth","setCurrentPage","getUsers","useEffect","Preloader","pageNumber"],"mappings":"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","file":"static/js/8.8c198a3b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/noneAvatar.44330dbd.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"Users_panel__1hiwp\",\"paginationCenter\":\"Users_paginationCenter__1V25j\",\"selectedPage\":\"Users_selectedPage__15RHT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"User_item__2j_-r\",\"text\":\"User_text__1i5nO\",\"textMin\":\"User_textMin__26yAi\",\"imgDiv\":\"User_imgDiv__2jibl\"};","import React from 'react';\r\nimport styles from './User.module.css';\r\nimport noneAvatar from '../../../assets/img/noneAvatar.png';\r\nimport Button from '@material-ui/core/Button';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst User = (props) => {\r\n\treturn (\r\n\t\t<div className={styles.item}>\r\n\t\t\t<div className={styles.imgDiv}>\r\n\t\t\t\t<NavLink to={\"/profile/\" + props.id}>\r\n\t\t\t\t\t<img src={props.imgSrc != null ? props.imgSrc : noneAvatar} />\r\n\t\t\t\t</NavLink>\r\n\t\t\t</div>\r\n\t\t\t<div className={styles.text}>\r\n\t\t\t\t{/* {props.name + ' ' + props.surname} */}\r\n\t\t\t\t{props.name}\r\n\t\t\t\t<div className={styles.textMin}>\r\n\t\t\t\t\t{props.status}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={styles.textMin}>\r\n\t\t\t\t\t{/* {props.country + ', ' + props.city} */}\r\n\t\t\t\t</div>\r\n\t\t\t\t{props.isAuth &&\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprops.followed\r\n\t\t\t\t\t\t\t\t? <Button disabled={props.followingInProgress.some(id => id === props.id)} variant=\"contained\" size=\"small\" color=\"secondary\" style={{ marginTop: '10px' }} endIcon={<Icon>cancel</Icon>} onClick={() => {\r\n\t\t\t\t\t\t\t\t\tprops.unfollow(props.id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}>Отписаться</Button>\r\n\t\t\t\t\t\t\t\t: <Button disabled={props.followingInProgress.some(id => id === props.id)} variant=\"contained\" size=\"small\" color=\"primary\" style={{ marginTop: '10px' }} endIcon={<Icon>add_circle</Icon>} onClick={() => {\r\n\t\t\t\t\t\t\t\t\tprops.follow(props.id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}>Подписаться</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default User;","import React from 'react';\r\nimport styles from './Users.module.css';\r\nimport User from './User/User';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\n\r\nlet Users = (props) => {\r\n    let pagesCount = Math.ceil(props.totalUsersCount / props.pageSize); //вычисляем кол-во страниц\r\n\r\n    let usersElement = props.usersPage.map(u => <User name={u.name} key={u.id} id={u.id} imgSrc={u.photos.small} status={u.status} followed={u.followed} follow={props.follow} unfollow={props.unfollow} toggleIsFollowInProgress={props.toggleIsFollowInProgress} followingInProgress={props.followingInProgress} isAuth={props.isAuth} />);\r\n\r\n    const handleChange = (event, value) => {\r\n        props.onPageChanged(value);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className={styles.panel}>\r\n                Поиск пользователей...\r\n                    </div>\r\n            <div className={styles.listUsers}>\r\n                {usersElement}\r\n            </div>\r\n            <div className={styles.paginationCenter}>\r\n                <Pagination count={pagesCount} defaultPage={1} boundaryCount={6} page={props.currentPage} color=\"primary\" onChange={handleChange} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Users;","import { createSelector } from \"reselect\";\r\n\r\n//примитивный селектор, из них можно создавать более навороченные селекторы\r\nconst getUsers = (state) => {\r\n    return state.usersPage.users;\r\n}\r\n\r\n//исп библиотеки reselect \r\n//параметры: 1-примитивный селектор, 2-конечное значение (зависимость)\r\nexport const getUsersSelector = createSelector(getUsers, (users) => {\r\n    return users.filter(u => true); //заглушка в качетсве примера\r\n});\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize;\r\n}\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount;\r\n}\r\n\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage;\r\n}\r\n\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching;\r\n}\r\n\r\nexport const getFollowingInProgress = (state) => {\r\n    return state.usersPage.followingInProgress;\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { follow, unfollow, setCurrentPage, getUsers } from './../../redux/usersReducer';\r\nimport Users from './Users';\r\nimport Preloader from '../common/Preloader/Preloader.jsx';\r\nimport { compose } from 'redux';\r\nimport { getPageSize, getTotalUsersCount, getCurrentPage, getIsFetching, getFollowingInProgress, getUsersSelector } from '../../selectors/usersSelectors';\r\nimport { useEffect } from 'react';\r\nimport { getIsAuth } from '../../selectors/authSelectors';\r\n\r\nconst UsersContainer = (props) => {\r\n\tuseEffect(() => {\r\n\t\tlet {currentPage, pageSize} = props; //деструктуризация пропсов\r\n\t\tprops.getUsers(currentPage, pageSize);\r\n\t}, [])\r\n\r\n\tconst onPageChanged = (pageNumber) => {\r\n\t\tprops.getUsers(pageNumber);\r\n\t\tprops.setCurrentPage(pageNumber);\r\n\t}\r\n\r\n\treturn <>\r\n\t\t{props.isFetching ? <Preloader /> : null}\r\n\t\t<Users\r\n\t\t\ttotalUsersCount={props.totalUsersCount}\r\n\t\t\tpageSize={props.pageSize}\r\n\t\t\tusersPage={props.usersPage}\r\n\t\t\tcurrentPage={props.currentPage}\r\n\t\t\tonPageChanged={onPageChanged}\r\n\t\t\tfollow={props.follow}\r\n\t\t\tunfollow={props.unfollow}\r\n\t\t\ttoggleIsFollowInProgress={props.toggleIsFollowInProgress}\r\n\t\t\tfollowingInProgress={props.followingInProgress}\r\n\t\t\tisAuth={props.isAuth}\r\n\t\t/>\r\n\t</>\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tusersPage: getUsersSelector(state),\r\n\t\tpageSize: getPageSize(state),\r\n\t\ttotalUsersCount: getTotalUsersCount(state),\r\n\t\tcurrentPage: getCurrentPage(state),\r\n\t\tisFetching: getIsFetching(state),\r\n\t\tfollowingInProgress: getFollowingInProgress(state),\r\n\t\tisAuth: getIsAuth(state),\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\tconnect(mapStateToProps, { follow, unfollow, setCurrentPage, getUsers }))(UsersContainer);"],"sourceRoot":""}