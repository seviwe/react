{"version":3,"sources":["components/common/FormsControls/FormsControls.jsx","components/common/FormsControls/FormsControls.module.css","utils/validators/validators.js","components/Dialogs/Dialogs.module.css","components/Dialogs/DialogItem/DialogItem.module.css","components/Dialogs/Message/Message.module.css","components/Dialogs/DialogItem/DialogItem.jsx","components/Dialogs/Message/Message.jsx","components/Dialogs/Dialogs.jsx","hoc/withAuthRedirect.js","selectors/dialogsSelectors.js","components/Dialogs/DialogsContainer.jsx"],"names":["FormControl","input","meta","touched","error","controlType","props","hasError","className","styles","formControl","React","createElement","createField","placeholder","name","validators","component","type","text","validate","module","exports","required","value","maxLengthCreator","maxLength","length","DialogItem","dialog","to","id","activeClassName","activeLink","src","imgSrc","imgDialog","Message","message","border","AddMessageReduxForm","reduxForm","form","onSubmit","handleSubmit","Field","textAreaWidthAuto","Dialogs","dialogsElement","dialogsPage","dialogs","map","d","key","messagesElement","messages","m","isAuth","dialogsItems","sendMessage","values","addMessage","newMessageBody","mapStateToPropsForRedirect","state","auth","getDialogsPage","compose","connect","Component"],"mappings":"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","file":"static/js/5.5d63e54d.chunk.js","sourcesContent":["import React from \"react\";\r\nimport styles from './FormsControls.module.css';\r\nimport { reduxForm, Field } from 'redux-form';\r\n//import Button from '@material-ui/core/Button';\r\n//import Icon from '@material-ui/core/Icon';\r\n//import TextField from '@material-ui/core/TextField';\r\n\r\n/*REST оператор. Пропсы будут содержать в себе всё, кроме input и meta*/\r\nexport let FormControl = ({ input, meta: {touched, error}, controlType, ...props }) => {\r\n    const hasError = touched && error;\r\n    return (\r\n        <div className={styles.formControl + \" \" + (hasError ? styles.error : \"\")}>\r\n            {React.createElement(controlType, { ...input, ...props })}\r\n            {hasError && <span>{error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\n// export const Textarea = ({ input, meta, ...props }) => {\r\n\r\n//     const hasError = meta.touched && meta.error;\r\n\r\n//     return (\r\n//         <div className={styles.formControl + \" \" + (hasError ? styles.error : \"\")}>\r\n//             <textarea {...input} {...props} />\r\n//             {hasError && <span>{meta.error}</span>}\r\n//         </div>\r\n//     )\r\n// }\r\n\r\n// export const Input = ({ input, meta, ...props }) => {\r\n\r\n//     const hasError = meta.touched && meta.error;\r\n\r\n//     return (\r\n//         <div className={styles.formControl + \" \" + (hasError ? styles.error : \"\")}>\r\n//             <input {...input} {...props} />\r\n//             {hasError && <span>{meta.error}</span>}\r\n//         </div>\r\n//     )\r\n// }\r\n\r\nexport const createField = (placeholder, name, validators, component, controlType, type = {}, props = {}, text = {}) => {\r\n    return (\r\n        <div>\r\n            <Field placeholder={placeholder} name={name} component={component} controlType={controlType} validate={validators} type={type} {...props} />{text}\r\n        </div>\r\n    )\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormsControls_formControl__1Wfj3\",\"error\":\"FormsControls_error__2_D7_\",\"formError\":\"FormsControls_formError__36Lbt\"};","export const required = value => {\r\n    if (value) return undefined;\r\n    return 'Поле обязательно для заполнения';\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n    if (value && value.length > maxLength) return 'Макс. длина ' + maxLength + ' символов';\r\n    return undefined;\r\n}\r\n\r\n//more examples: https://redux-form.com/8.3.0/examples/fieldlevelvalidation/","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__1iKDV\",\"dialogsItems\":\"Dialogs_dialogsItems__4zTg0\",\"activeLink\":\"Dialogs_activeLink__32FVJ\",\"dialog\":\"Dialogs_dialog__3-qaq\",\"messages\":\"Dialogs_messages__2Olku\",\"sendMessage\":\"Dialogs_sendMessage__35Jk3\",\"textAreaWidthAuto\":\"Dialogs_textAreaWidthAuto__25Oxq\",\"border\":\"Dialogs_border__1uG36\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"activeLink\":\"DialogItem_activeLink__3FxEh\",\"dialog\":\"DialogItem_dialog__vmEVD\",\"imgDialog\":\"DialogItem_imgDialog__1DXaM\",\"name\":\"DialogItem_name__2i5LR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages\":\"Message_messages__2_j6-\",\"message\":\"Message_message__3vcQC\",\"border\":\"Message_border__1_onV\"};","import React from 'react';\r\nimport styles from './DialogItem.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst DialogItem = (props) => {\r\n\treturn (\r\n\t\t<div className={styles.dialog}>\r\n\t\t\t<NavLink to={\"/dialogs/\" + props.id} activeClassName={styles.activeLink}><img src={props.imgSrc} className={styles.imgDialog} /> <div className={styles.name}>{props.name}</div></NavLink>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default DialogItem;","import React from 'react';\r\nimport styles from './Message.module.css';\r\n\r\nconst Message = ({message}) => {\r\n\treturn (\r\n\t\t<div className={styles.message + \" \" + styles.border}>\r\n\t\t\t{message}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Message;","import React from 'react';\r\nimport styles from './Dialogs.module.css';\r\nimport DialogItem from './DialogItem/DialogItem';\r\nimport Message from './Message/Message';\r\n//import Button from '@material-ui/core/Button';\r\n//import Icon from '@material-ui/core/Icon';\r\n//import TextField from '@material-ui/core/TextField';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport { FormControl } from '../common/FormsControls/FormsControls';\r\nimport { required, maxLengthCreator } from \"../../utils/validators/validators\";\r\n\r\nconst maxLength = maxLengthCreator(300);\r\n\r\nconst Dialogs = (props) => {\r\n\tlet dialogsElement = props.dialogsPage.dialogs.map(d => <DialogItem name={d.name} key={d.id} id={d.id} imgSrc={d.imgSrc} />);\r\n\tlet messagesElement = props.dialogsPage.messages.map(m => <Message message={m.message} key={m.id} id={m.id} />);\r\n\r\n\tlet addNewMessage = (values) => {\r\n\t\tprops.addMessage(values.newMessageBody);\r\n\t}\r\n\r\n\t//редирект на форму логина\r\n\tif (!props.isAuth) return <Redirect to={\"/login\"} />;\r\n\r\n\treturn (\r\n\t\t<div className={styles.dialogs}>\r\n\t\t\t<div className={styles.dialogsItems + \" \" + styles.border}>\r\n\t\t\t\t{dialogsElement}\r\n\t\t\t</div>\r\n\t\t\t<div className={styles.messages}>\r\n\t\t\t\t<div className={styles.border}>\r\n\t\t\t\t\t{messagesElement}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={styles.sendMessage + ' ' + styles.border}>\r\n\t\t\t\t\t<AddMessageReduxForm onSubmit={addNewMessage} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst DialogForm = (props) => {\r\n\treturn (\r\n\t\t<form onSubmit={props.handleSubmit}>\r\n\t\t\t{/* <TextField\r\n\t\t\t\tid=\"outlined-multiline-static\"\r\n\t\t\t\tlabel=\"Введите сообщение...\"\r\n\t\t\t\tmultiline\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tonChange={onMessageChange}\r\n\t\t\t\tvalue={props.dialogsPage.newMessageText}\r\n\t\t\t\tclassName={styles.textArea}\r\n\t\t\t/> */}\r\n\t\t\t{/* <Button variant=\"contained\" size=\"medium\" color=\"primary\" style={{ marginTop: '10px' }} endIcon={<Icon>send</Icon>} onClick={onAddMessage}>Отправить</Button> */}\r\n\r\n\t\t\t<Field component={FormControl} controlType=\"textarea\" className={styles.textAreaWidthAuto} name={\"newMessageBody\"} placeholder={\"Введите сообщение...\"} validate={[required, maxLength]} />\r\n\t\t\t<div>\r\n\t\t\t\t{/* <Button variant=\"contained\" size=\"medium\" color=\"primary\" style={{ marginTop: '10px' }} endIcon={<Icon>send</Icon>}>Отправить</Button> */}\r\n\t\t\t\t<button>Отправить</button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n}\r\n\r\nconst AddMessageReduxForm = reduxForm({ form: 'dialogAddMessageForm' })(DialogForm);\r\n\r\nexport default Dialogs;","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n});\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n    const RedirectComponent = (props) => {\r\n        if (!props.isAuth) return <Redirect to={\"/login\"} />;\r\n        return <Component {...props} />\r\n    }\r\n    return connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n}","import { createSelector } from \"reselect\";\r\n\r\nexport const getDialogsPage = (state) => {\r\n    return state.dialogsPage;\r\n}","import { addMessage } from '../../redux/dialogsReducer';\r\nimport Dialogs from './Dialogs';\r\nimport { connect } from 'react-redux';\r\nimport { withAuthRedirect } from './../../hoc/withAuthRedirect';\r\nimport { compose } from 'redux';\r\nimport { getDialogsPage } from './../../selectors/dialogsSelectors';\r\n\r\nlet mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tdialogsPage: getDialogsPage(state),\r\n\t}\r\n}\r\n\r\n//compose()() вызов компонент (Снизу вверх): Dialogs -> withAuthRedirect -> connect()(), т.е. как матрешка, \r\n//главная компонента Dialogs накрывается новым слоем контейнерных компонент, указанных в compose(ЗДЕСЬ)(ГЛАВНАЯ КОМПНЕНТА)\r\nexport default compose(\r\n\tconnect(mapStateToProps, { addMessage }), //connect()() вызов функции connect, а потом вызов того, что она вернула\r\n\twithAuthRedirect\r\n)(Dialogs);"],"sourceRoot":""}